# vim:ft=gitconfig

[alias]
  # Misc
  changeset = !git add .changeset && git commit -m 'Add changeset'
  cl = clone
  default = !basename $(git symbolic-ref --short refs/remotes/origin/HEAD)
  diffd = !git diff $(git default)..HEAD
  fix-ref = remote set-head origin -a
  trash = !git reset --hard && git clean -fd
  undo = reset --soft HEAD~
  unstash = stash pop
  # Branch
  br = branch
  del = branch -D
  name = branch -m
  # Commit
  amend = commit --amend --no-edit
  append = !git add -A && git commit --amend --no-edit
  c = commit -m
  ca = !git add -A && git commit -m
  edit = commit --amend
  msg = commit --amend -m
  sync = "!f() { git add -A && git commit -m \"${1-Sync}\" && git push; }; f"
  # Checkout
  co = checkout
  new = !git checkout $(git default) -b $2
  pd = !git fetch -pq origin $(git default) && git branch -vv | grep 'origin/.*: gone]' | awk '{print $1}' | xargs git branch -D
  # Merge
  merge-default = !git merge $(git default)
  merge-last = !git co - && git merge $(git default)
  # Rebase
  rebase-default = !git rebase $(git default)
  rebase-last = !git co - && git rebase $(git default)
  ri = !git rebase -i $(git default)
[core]
  autocrlf = input
  trustctime = false
  editor = nvim
  abbrev = 8
  pager = less -x2
[color]
  ui = true
[diff]
  colorMoved = default
[push]
  default = upstream
[branch]
  autosetuprebase = always
[pull]
  rebase = merges
[init]
  defaultBranch = main
[log]
  abbrevcommit = true
[push]
  autoSetupRemote = true
