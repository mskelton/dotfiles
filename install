#!/bin/bash

source ./dottie/dottie.sh

# Clean old files

# ~/.config directory
link .config/git ~/.config/git
link .config/byte/config.yaml ~/.config/byte/config.yaml
link .config/pomo/config.json ~/.config/pomo/config.json
link .config/starship.toml ~/.config/starship.toml

# Link files and directories
link bin ~/.local/bin
link kitty ~/.config/kitty
link nvim ~/.config/nvim
link tmux ~/.config/tmux
link hammerspoon ~/.hammerspoon
link skeletons ~/.skeletons

link emacs.d/init.el ~/.emacs.d/init.el
link lazygit/config.yml ~/Library/Application\ Support/lazygit/config.yml
link ngrok/ngrok.yml ~/Library/Application\ Support/ngrok/ngrok.yml

# Some directories need to be partially copied
link_dir home ~/
link_dir .config/fish ~/.config/fish/

# Add custom fonts to the user fonts library
copy_dir personal/fonts ~/Library/Fonts/

# Install remote fonts
curl -sL https://mskelton.github.io/termicons/termicons.ttf -o ~/Library/Fonts/termicons.ttf
curl -sL https://github.com/mskelton/vscode-codicons/raw/main/dist/codicon.ttf -o ~/Library/Fonts/codicon.ttf

# Work config
if [[ -f "$HOME/.work" ]]; then
	link federato/bin ~/.local/bin-work
	link federato/gh/config.yml ~/.config/gh/config.yml
	link federato/gh-dash/config.yml ~/.config/gh-dash/config.yml
	link_dir federato/fish ~/.config/fish/
else
	link .config/gh/config.yml ~/.config/gh/config.yml
	link .config/gh-dash/config.yml ~/.config/gh-dash/config.yml
	link_dir personal/fish ~/.config/fish/
fi

# VS Code settings and keybindings
link vscode/settings.json ~/Library/Application\ Support/Code/User/settings.json
link vscode/keybindings.json ~/Library/Application\ Support/Code/User/keybindings.json

# Finalize and print any errors
finalize
