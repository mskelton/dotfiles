#!/bin/bash

source ./dottie/dottie.sh

# Clean old files
rm -f ~/.config/fish/functions/source-fish.fish
rm -f ~/.config/fish/functions/update-tag.fish
rm -f ~/.config/fish/functions/url!.fish
rm -f ~/.config/fish/functions/url.fish
rm -f ~/.config/fish/functions/set-nginx-account.fish
rm -f ~/.config/fish/functions/restart-nginx.fish

# Link files and directories
link bin ~/.local/bin
link kitty ~/.config/kitty
link nvim ~/.config/nvim
link nvim ~/.config/nvim
link tmux ~/.config/tmux
link pomo/config.json ~/.config/pomo/config.json
link emacs.d/init.el ~/.emacs.d/init.el

# Home and fish configs have to be linked individually
link_contents home ~/
link_contents fish ~/.config/fish/

# Widen config
if [[ -n "$WIDEN" ]]; then
	link widen/bin ~/.local/bin-widen
	link widen/gh-dash/config.yml ~/.config/gh-dash/config.yml
	link_contents widen/fish ~/.config/fish/
else
	link gh-dash/config.yml ~/.config/gh-dash/config.yml
fi

# VS Code settings and keybindings
link vscode/settings.json ~/Library/Application\ Support/Code/User/settings.json
link vscode/keybindings.json ~/Library/Application\ Support/Code/User/keybindings.json

# Finalize and print any errors
finalize
