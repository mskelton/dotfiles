#!/usr/bin/env bash
# Quickly create a new issue

repo="--repo mskelton/dotfiles"
cmd="$1"
shift

_print_help() {
	echo 'Usage: quick [command] [args]'
	echo ''
	echo 'Commands:'
	echo '  list'
	echo '  add [title]'
	echo '  close [issue number]'
	echo '  view [issue number]'
	exit 0
}

# Print help if no args are provided
if [[ -z "$cmd" || "$cmd" == 'help' ]]; then
	_print_help
fi

if [[ "$cmd" == 'list' ]]; then
	gh issue list $repo
elif [[ "$cmd" == 'add' ]]; then
	gh issue create $repo -a "@me" -t "$*" -b ''
elif [[ "$cmd" == 'close' ]]; then
	for num in "$@"; do
		gh issue close $repo $num
	done
elif [[ "$cmd" == 'view' ]]; then
	for num in "$@"; do
		gh issue view -w $repo $num
	done
else
	_print_help
	exit 1
fi
