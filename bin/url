#!/usr/bin/env bash
# Print each URL in the input stream

regex=$(
	printf "%s" \
		"(https?|ftp):\/\/" \
		"(\.?[a-zA-Z0-9_\-])+" \
		"(\.[a-zA-Z]+)?" \
		"(:[0-9]+)?" \
		"(\.?[a-zA-Z0-9%_=~/+-]+)*" \
		"(\?(\.?[a-zA-Z0-9&%_=~+-])*)?"
)

while IFS= read line; do
	echo $line | grep -oE "$regex"
done
