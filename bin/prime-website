#!/usr/bin/env bash
# Prime website

urls=('/' '/blog' '/projects' '/about' '/uses' '/blog/using-yarn-constraints')
log_file="/tmp/prime-website.log"
max_lines=1000

# Truncate the log file to the last 1000 lines
tail -n $max_lines $log_file | head -n $max_lines | sponge $log_file

# Add a separator between entries
echo "" >>$log_file

# Prime the website
for url in ${urls[@]}; do
	curl -s -o /dev/null -w "%{http_code} $url" "https://mskelton.dev$url" >>$log_file
	echo "" >>$log_file
done

# Add a timestamp
echo "Website primed at $(date '+%Y-%m-%d %H:%M:%S') CST" >>$log_file
