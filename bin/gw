#!/usr/bin/env bash
# Create a new worktree and open it in Cursor
# Usage: gw <branch_name>

# Check if a branch name is provided
if [ -z "$1" ]; then
	echo "Usage: gw <branch_name>"
	exit 1
fi

cd "$HOME/dev/web"

branch=ms/$1
dir="$HOME/dev/web-$1"

# Create a new worktree
git worktree add -b "$branch" "$dir"

# Reload direnv to install deps
cd "$dir"
direnv allow .

# Configure Graphite
gt track

# Open in Cursor
cursor "$dir"
